generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  mail     String     @id @db.VarChar(255)
  username String     @unique @db.VarChar(100)
  password String     @db.VarChar(255)
  isadmin  Boolean
  fooduser fooduser[]
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model food {
  id                                           Int                @id @default(autoincrement())
  label                                        String             @db.VarChar(255)
  diet                                         String?            @db.VarChar(100)
  nutriscore                                   String?            @db.Char(1)
  measuringunit                                String             @db.VarChar(255)
  barcode                                      String             @unique @db.VarChar(50)
  imagepath                                    String?            @db.VarChar(200)
  foodstore_foodstore_foodTofood               foodstore[]        @relation("foodstore_foodTofood")
  fooduser_fooduser_foodTofood                 fooduser[]         @relation("fooduser_foodTofood")
  ingredientamount_ingredientamount_foodTofood ingredientamount[] @relation("ingredientamount_foodTofood")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model foodstore {
  food                         Int
  store                        Int
  quantity                     Int?     @default(0)
  price                        Decimal? @db.Decimal(10, 2)
  food_foodstore_foodTofood    food     @relation("foodstore_foodTofood", fields: [food], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_foodstore_food")
  store_foodstore_storeTostore store    @relation("foodstore_storeTostore", fields: [store], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_foodstore_store")

  @@id([food, store])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model ingredientamount {
  recipe                                 Int
  food                                   Int
  quantity                               Int
  food_ingredientamount_foodTofood       food   @relation("ingredientamount_foodTofood", fields: [food], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_ing_food")
  recipe_ingredientamount_recipeTorecipe recipe @relation("ingredientamount_recipeTorecipe", fields: [recipe], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_ing_recipe")

  @@id([recipe, food])
}

model recipe {
  id                                               Int                @id @default(autoincrement())
  label                                            String             @db.VarChar(255)
  description                                      String?
  caloricintake                                    Int?
  nbeaters                                         Int?
  timetomake                                       Int?
  ingredientamount_ingredientamount_recipeTorecipe ingredientamount[] @relation("ingredientamount_recipeTorecipe")
}

model store {
  id                               Int         @id @default(autoincrement())
  label                            String      @db.VarChar(255)
  longitude                        Decimal     @db.Decimal(9, 6)
  latitude                         Decimal     @db.Decimal(9, 6)
  foodstore_foodstore_storeTostore foodstore[] @relation("foodstore_storeTostore")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model fooduser {
  food                     Int
  user_mail                String    @db.VarChar(255)
  quantity                 Int?      @default(0)
  storagetype              String?   @db.VarChar(100)
  expirationdate           DateTime? @db.Date
  food_fooduser_foodTofood food      @relation("fooduser_foodTofood", fields: [food], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_fooduser_food")
  User                     User      @relation(fields: [user_mail], references: [mail], onDelete: Cascade, onUpdate: NoAction, map: "fk_fooduser_user")

  @@id([food, user_mail])
}
