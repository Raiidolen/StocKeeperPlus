generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  mail     String  @id @db.VarChar(255)
  username String  @unique @db.VarChar(100)
  password String  @db.VarChar(255)
  isadmin  Boolean
  food     food[]
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model food {
  id               Int                @id @default(autoincrement())
  label            String             @db.VarChar(255)
  expirationdate   DateTime?          @db.Date
  quantity         Int?               @default(0)
  storagetype      String?            @db.VarChar(100)
  diet             String?            @db.VarChar(100)
  nutriscore       String?            @db.Char(1)
  user_mail        String?            @db.VarChar(255)
  User             User?              @relation(fields: [user_mail], references: [mail], onDelete: Cascade, onUpdate: NoAction, map: "fk_food_user")
  foodstore        foodstore[]
  ingredientamount ingredientamount[]
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model foodstore {
  food_id  Int
  store_id Int
  price    Decimal? @db.Decimal(10, 2)
  food     food     @relation(fields: [food_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_foodstore_food")
  store    store    @relation(fields: [store_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_foodstore_store")

  @@id([food_id, store_id])
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model ingredientamount {
  recipe_id Int
  food_id   Int
  quantity  Int
  food      food   @relation(fields: [food_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_ing_food")
  recipe    recipe @relation(fields: [recipe_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_ing_recipe")

  @@id([recipe_id, food_id])
}

model recipe {
  id               Int                @id @default(autoincrement())
  label            String             @db.VarChar(255)
  description      String?
  caloricintake    Int?
  timetomake       Int?
  ingredientamount ingredientamount[]
}

model store {
  id        Int         @id @default(autoincrement())
  label     String      @db.VarChar(255)
  longitude Decimal     @db.Decimal(9, 6)
  latitude  Decimal     @db.Decimal(9, 6)
  foodstore foodstore[]
}
