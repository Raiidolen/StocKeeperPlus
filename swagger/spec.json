{"openapi":"3.0.0","info":{"title":"API","version":"1.0.0"},"paths":{"/food":{"post":{"tags":["Food"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FoodToAddSchema"}}}},"responses":{"201":{"description":"food created"},"400":{"description":"validation errors","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Opération échouée :"},"details":{"type":"array","items":{"type":"object","properties":{"message":{"type":"string","example":"The barcode field must be defined"},"rule":{"type":"string","example":"required"},"field":{"type":"string","example":"barcode"}}}}}}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"500":{"description":"Error server"}}},"patch":{"tags":["Food"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FoodToUpdateSchema"}}}},"responses":{"204":{"description":"food updated"},"400":{"description":"validation errors","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Opération échouée :"},"details":{"type":"array","items":{"type":"object","properties":{"message":{"type":"string","example":"The id field must be defined"},"rule":{"type":"string","example":"required"},"field":{"type":"string","example":"id"}}}}}}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"500":{"description":"Error server"}}},"delete":{"tags":["Food"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FoodIDSchema"}}}},"responses":{"204":{"description":"food deleted"},"400":{"description":"validation errors","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Opération échouée :"},"details":{"type":"array","items":{"type":"object","properties":{"message":{"type":"string","example":"The id field must be defined"},"rule":{"type":"string","example":"required"},"field":{"type":"string","example":"id"}}}}}}}}},"404":{"description":"food not found"},"500":{"description":"Error server"}}}},"/food/get/{id}":{"get":{"tags":["Food"],"parameters":[{"in":"path","name":"id","schema":{"$ref":"#/components/schemas/FoodIDSchema"},"required":true,"description":"Numeric ID of the food to get"}],"responses":{"200":{"description":"food found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Food"}}}},"400":{"description":"validation errors","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Opération échouée :"},"details":{"type":"array","items":{"type":"object","properties":{"message":{"type":"string","example":"The id field must be defined"},"rule":{"type":"string","example":"number"},"field":{"type":"string","example":"id"}}}}}}}}},"404":{"description":"food not found"},"500":{"description":"Error server"}}}},"/food/barcode/{barcode}":{"get":{"tags":["Food"],"parameters":[{"in":"path","name":"barcode","schema":{"$ref":"#/components/schemas/FoodBarcodeSchema"},"required":true,"description":"Barcode of the food"}],"responses":{"200":{"description":"food found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Food"}}}},"400":{"description":"validation errors","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Opération échouée :"},"details":{"type":"array","items":{"type":"object","properties":{"message":{"type":"string","example":"The barcode field format is invalid"},"rule":{"type":"string","example":"regex"},"field":{"type":"string","example":"barcode"}}}}}}}}},"404":{"description":"food not found"},"500":{"description":"Error server"}}}},"/food/all":{"get":{"tags":["Food"],"responses":{"200":{"description":"list of foods","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Food"}}}}},"500":{"description":"Error server"}}}},"/user":{"post":{"tags":["User"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/userToAddSchema"}}}},"responses":{"204":{"description":"user created"},"400":{"description":"validation errors","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Opération échouée :"},"details":{"type":"array","items":{"type":"object","properties":{"message":{"type":"string","example":"The username field must be defined"},"rule":{"type":"string","example":"required"},"field":{"type":"string","example":"username"}}}}}}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"500":{"description":"Error server"}}},"patch":{"tags":["User"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/userToUpdateSchema"}}}},"responses":{"204":{"description":"user updated"},"400":{"description":"validation errors","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Opération échouée :"},"details":{"type":"array","items":{"type":"object","properties":{"message":{"type":"string","example":"The mail field must be defined"},"rule":{"type":"string","example":"required"},"field":{"type":"string","example":"mail"}}}}}}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"500":{"description":"Error server"}}},"delete":{"tags":["User"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/userIDSchema"}}}},"responses":{"204":{"description":"user deleted"},"400":{"description":"validation errors","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Opération échouée :"},"details":{"type":"array","items":{"type":"object","properties":{"message":{"type":"string","example":"The mail field must be defined"},"rule":{"type":"string","example":"required"},"field":{"type":"string","example":"mail"}}}}}}}}},"404":{"description":"user not found"},"500":{"description":"Error server"}}}},"/user/get/{mail}":{"get":{"tags":["User"],"parameters":[{"in":"path","name":"mail","schema":{"$ref":"#/components/schemas/userIDSchema"},"required":true,"description":"String ID of the user to get"}],"responses":{"200":{"description":"user found","content":{"application/json":{"schema":{"type":"object","properties":{"mail":{"type":"string","format":"email","example":"username@gmail.com"},"username":{"type":"string","example":"username"},"isadmin":{"type":"boolean","example":false}}}}}},"400":{"description":"validation errors","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Opération échouée :"},"details":{"type":"array","items":{"type":"object","properties":{"message":{"type":"string","example":"The mail field must be defined"},"rule":{"type":"string","example":"email"},"field":{"type":"string","example":"mail"}}}}}}}}},"404":{"description":"user not found"},"500":{"description":"Error server"}}}},"/user/all":{"get":{"tags":["User"],"responses":{"200":{"description":"list of users","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","properties":{"mail":{"type":"string","format":"email","example":"username@gmail.com"},"username":{"type":"string","example":"username"},"isadmin":{"type":"boolean","example":false}}}}}}},"500":{"description":"Error server"}}}}},"components":{"schemas":{"Food":{"type":"object","properties":{"id":{"type":"integer","example":1},"label":{"type":"string","example":"Pâtes complètes"},"diet":{"type":"string","nullable":true,"example":"vegetarien"},"nutriscore":{"type":"string","nullable":true,"maxLength":1,"example":"A"},"measuringunit":{"type":"string","example":"gram"},"barcode":{"type":"string","example":"1234567890123"},"imagepath":{"type":"string","nullable":true,"example":"/images/default.jpg"}}},"User":{"type":"object","properties":{"mail":{"type":"string","format":"email","example":"username@gmail.com"},"username":{"type":"string","example":"username"},"password":{"type":"string","minLength":5,"example":"password"},"isadmin":{"type":"boolean","example":false}}},"FoodIDSchema":{"type":"object","properties":{"id":{"type":"integer"}},"required":["id"]},"FoodToAddSchema":{"type":"object","properties":{"label":{"type":"string"},"diet":{"type":"string"},"nutriscore":{"type":"string","maxLength":1,"pattern":"^[A-Ea-e]$"},"measuringunit":{"type":"string"},"barcode":{"type":"string","pattern":"^(?:\\d{8}|\\d{13})$"}},"required":["label","measuringunit","barcode"]},"FoodToUpdateSchema":{"type":"object","properties":{"id":{"type":"integer"},"label":{"type":"string"},"diet":{"type":"string"},"nutriscore":{"type":"string","maxLength":1,"pattern":"^[A-Ea-e]$"},"measuringunit":{"type":"string"},"barcode":{"type":"string","pattern":"^(?:\\d{8}|\\d{13})$"},"imagepath":{"type":"string"}},"required":["id","barcode"]},"FoodBarcodeSchema":{"type":"object","properties":{"barcode":{"type":"string","pattern":"^(?:\\d{8}|\\d{13})$"}},"required":["barcode"]},"userIDSchema":{"type":"object","properties":{"mail":{"type":"string"}},"required":["mail"]},"userToAddSchema":{"type":"object","properties":{"mail":{"type":"string","format":"email"},"username":{"type":"string"},"password":{"type":"string","minLength":5},"isadmin":{"type":"boolean"}},"required":["mail","username","password","isadmin"]},"userToUpdateSchema":{"type":"object","properties":{"mail":{"type":"string","format":"email"},"username":{"type":"string"},"password":{"type":"string","minLength":5},"isadmin":{"type":"boolean"}},"required":["mail"]}},"responses":{"getFood":{"description":"the food","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Food"}}}},"getFoodByBarcode":{"description":"the food found by barcode","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Food"}}}},"getAllFood":{"description":"list of foods","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Food"}}}}},"addFood":{"description":"food created"},"updateFood":{"description":"food updated"},"deleteFood":{"description":"food deleted"},"getUser":{"description":"the user","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"getAllUser":{"description":"list of users","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/User"}}}}},"addUser":{"description":"user created"},"updateUser":{"description":"user updated"},"deleteUser":{"description":"user deleted"},"UnauthorizedError":{"description":"Access token is missing or invalid","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string","example":"Non authentifié (cookie manquant)"}}}}}}}},"tags":[]}